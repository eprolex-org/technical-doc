# 02.4 Les √©v√©nements : `v-on`

```html
<span class="round" v-on:click="clickOnRound()"></span>
<span class="round" @click="clickOnRound()"></span>
```

```js
export default {
  name: 'MyComponent',
  methods: {
    clickOnRound: function () {
      console.log('click click')
    }
  }
}
```

## options de `v-on`

- stop
- once : invoque une seul fois
- capture
- self
- prevent : emp√™che le comportement `html` par d√©faut (lien, formulaire)
- enter : avec @keyup `<input @keyup.enter="send"`

```html
<form v-hide @submit.prevent="addPlayerName">
```

 

## syntaxe de l'appelle de la m√©thode

Le nom d'une m√©thode :

```html
<button @click="handleClick">Push me</button>
```

L'appelle d'une m√©thode avec argument :

```html
<button @click="handleClick('titi')">Push me</button>
```

L'appelle d'une fonction avec argument et l'objet `$event` (mapping par Vue de l'objet `DOM` event)

```html
<button @click="handleClick('toto', $event)">Push me</button>
```

Une expression javascript :

```html
<button @click="count += 6">Push me</button>
```



## la communication entre composants

<img src="assets/evnet-communication.png" alt="evnet-communication" style="zoom:50%;" />

## √âmettre un √©v√©nement `this.$emit('eventName', payload)`

Dans l'enfant

```js
this.$emit('score', this.click)
```



## R√©ceptionner un √©v√©nement : `@eventName="handleEvent"`

Dans le parent

```html
<component-one  @say="handleSay"/>
```

```js
methods: {
    handleSay(payload) {
        console.log('App component listen say event')
        console.log(payload)
    }
}
```



## Communication inter-composant : `this.$root`

On peut communiquer entre composants en utilisant `this.$root` l'√©l√©ment racine.

`ComponentA`

```js
methods: {
    handleClick() {
        this.$root.$emit('say', "Houhoouhou üêµ")
    }
}
```

`OtherComponent` de m√™me niveau, enfant, parent, grand-parent, ...

```js
mounted() {
    this.$root.$on('say', payload => console.log(`in the app component payload : ${payload}`))
}
```

Utiliser le `hook` `mounted`.

`Pattern` √† √©viter √† part pour des cas tr√®s simple.

Pr√©f√©rer `Vuex`.