# 16.5 `Localisation` avec `Blazor Server`

## Ce qui est pris en charge

`IStringLocalizer` et `IStringLocalizer<T>`.

L'en-tête `Accept-Language` définit par le navigateur :

<img src="assets/accept-language-header.png" alt="accept-language-header" />



## Les termes

`Globalization` : date, nombre et devises.

`Localization` : fichiers de traduction.

Le navigateur parle de `langue` alors que `.net` parle de `culture`.



## Différence avec `Webassembly`

Il semble que pour changer la `culture` on utilise `CultureInfo.CurrentCulture` et non pas `CultureInfo.DefaultThreadCurrentCulture` comme en `wasm`.



## `Settings` dans `Program.cs`

On doit juste ajouter :

```cs
builder.Services.AddLocalization();
```

Par défaut la `culture` de l'application `Blazor Server` est celle du système d'exploitation :

<img src="assets/language-setting-macos.png" alt="language-setting-macos" />

Dans `Home.razor`

```ruby
<h1>Culture : @CultureInfo.CurrentCulture</h1>
<h1>Culture UI : @CultureInfo.CurrentUICulture</h1>
```

<img src="assets/display-culture.png" alt="display-culture" style="zoom:33%;" />

### Définir la culture par défaut

Dans `Program.cs` avant `app.MapRazorComponents`

```cs
var localizationOptions = new RequestLocalizationOptions()
    .SetDefaultCulture(supportedCultures[0]);

app.UseRequestLocalization(localizationOptions);
```

Voici une configuration complète :

```cs
string[] supportedCultures = ["fr-FR", "en-US", "de-CH"];

var localizationOptions = new RequestLocalizationOptions()
    .SetDefaultCulture(supportedCultures[0])
     .AddSupportedCultures(supportedCultures)
     .AddSupportedUICultures(supportedCultures);

app.UseRequestLocalization(localizationOptions);
```



